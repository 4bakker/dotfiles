#!/usr/bin/env bash

OPT_COLOR=""

while getopts ":c" OPT; do
	case "$OPT" in
		c) OPT_COLOR="--color";;
	esac
done

shift $((OPTIND-1))

if [ $# -ge 1 ]; then
	if [[ "$1" == http* ]]; then
	    RAW=$(cURL --silent "$1")
	elif [ -f "$1" ]; then
		RAW=$(cat "$1")
	fi
else
    RAW=$(cat -)
fi

JSON=$(echo "$RAW" | underscore print "$OPT_COLOR")

echo "$JSON"
