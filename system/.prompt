## Prompt

bash_prompt_command() {

    local MAXLENGTH=35
    local TRUNC_SYMBOL=".."
    local DIR=${PWD##*/}

    MAXLENGTH=$(( ( MAXLENGTH < ${#DIR} ) ? ${#DIR} : MAXLENGTH ))
    NEW_PWD=${PWD/#$HOME/\~}

    local OFFSET=$(( ${#NEW_PWD} - MAXLENGTH ))

    if [ ${OFFSET} -gt "0" ]; then
        NEW_PWD=${NEW_PWD:$OFFSET:$MAXLENGTH}
        NEW_PWD=${TRUNC_SYMBOL}/${NEW_PWD#*/}
    fi

    # Update terminal title
    if [[ $TERM == xterm* ]]; then
        echo -ne "\033]0;${NEW_PWD}\007"
    fi

    # Parse Git branch name
	GIT_INFO=$(parse_git_branch)
}

parse_git_branch() {
	local OUT=`git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\1/'`
	if [ "$OUT" != "" ]; then echo " $OUT"; fi
}

PROMPT_COMMAND=bash_prompt_command

PS1="${TITLEBAR}${COLOR_GREEN}\u${COLOR_BLUE}@\h ${COLOR_YELLOW}\${NEW_PWD}${COLOR_GREEN}\${GIT_INFO}${COLOR_YELLOW} ‚ùØ${COLOR_WHITE} ${COLOR_NORMAL}"
